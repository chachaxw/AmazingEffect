(function(c){var b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},g=b[Modernizr.prefixed("transition")],a={transitions:Modernizr.csstransitions};function f(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}return i}function d(h){this.el=h;this.paths=[].slice.call(this.el.querySelectorAll("path"));this.pathsArr=new Array();this.lengthsArr=new Array();this._init()}d.prototype._init=function(){var h=this;this.paths.forEach(function(k,j){h.pathsArr[j]=k;k.style.strokeDasharray=h.lengthsArr[j]=k.getTotalLength()});this.draw(0)};d.prototype.draw=function(k){for(var j=0,h=this.pathsArr.length;j<h;++j){this.pathsArr[j].style.strokeDashoffset=this.lengthsArr[j]*(1-k)}};function e(i,h){this.el=i;this.options=f({},this.options);f(this.options,h);this._init()}e.prototype.options={statusTime:1500};e.prototype._init=function(){this.button=this.el.querySelector("button");this.progressEl=new d(this.el.querySelector("svg.progress-circle"));this.successEl=new d(this.el.querySelector("svg.checkmark"));this.errorEl=new d(this.el.querySelector("svg.cross"));this._initEvents();this._enable()};e.prototype._initEvents=function(){var h=this;this.button.addEventListener("click",function(){h._submit()})};e.prototype._submit=function(){classie.addClass(this.el,"loading");var i=this,h=function(j){if(a.transitions){if(j.propertyName!=="width"){return false}this.removeEventListener(g,h)}this.setAttribute("disabled","");if(typeof i.options.callback==="function"){i.options.callback(i)}else{i.setProgress(1);i.stop()}};if(a.transitions){this.button.addEventListener(g,h)}else{h()}};e.prototype.stop=function(h){var i=this,j=function(){i.progressEl.draw(0);if(typeof h==="number"){var l=h>=0?"success":"error",k=h>=0?i.successEl:i.errorEl;k.draw(1);classie.addClass(i.el,l);setTimeout(function(){classie.remove(i.el,l);k.draw(0);i._enable()},i.options.statusTime)}else{i._enable()}classie.removeClass(i.el,"loading")};setTimeout(j,300)};e.prototype.setProgress=function(h){this.progressEl.draw(h)};e.prototype._enable=function(){this.button.removeAttribute("disabled")};c.UIProgressButton=e})(window);